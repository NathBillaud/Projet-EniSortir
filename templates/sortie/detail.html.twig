{% extends 'base.html.twig' %}
{% block body %}
    <h1>Afficher une sortie</h1>

    <p>Date et heure : {{ sortie.dateHeureDebut|date('d/m/Y H:i') }}</p>
    <p>Durée : {{ sortie.duree }} minutes</p>
    <p>Date limite d'inscription : {{ sortie.dateLimiteInscription|date('d/m/Y') }}</p>
    <p>Nombre de places : {{ sortie.nbInscriptionsMax }}</p>

    <h2>Lieu</h2>
    <p>Ville : {{ sortie.lieu.ville.nom }}</p>
    <p>Rue : {{ sortie.lieu.rue }}</p>
    <p>Code postal : {{ sortie.lieu.ville.codePostal }}</p>
    <p>Latitude : {{ sortie.lieu.latitude }}</p>
    <p>Longitude : {{ sortie.lieu.longitude }}</p>

    <h2>Description</h2>
    <p>{{ sortie.infosSortie }}</p>


<h2>Participants inscrits</h2>
<ul>
    {% for user in sortie.users %}
        <li>
            <a href="{{ path('user_profil', {id: user.id}) }}">
                {{ user.pseudo }} - {{ user.nom }}
            </a>
        </li>
    {% else %}
        <li>Aucun participant inscrit</li>
    {% endfor %}

    {% if sortie.dateLimiteInscription > "now"|date %}
    {% if not sortie.users.contains(app.user) %}
    <form method="post" action="{{ path('sortie_inscription', {id: sortie.id}) }}">
    <button type="submit" class="btn btn-success">Je participe</button>
    </form>
    {% else %}
    <p class="text-success">Vous êtes déjà inscrit(e) à cette sortie.</p>
    {% endif %}
    {% else %}
    <button class="btn btn-secondary" disabled>Inscriptions closes</button>
    {% endif %}

</ul>

{% endblock %}